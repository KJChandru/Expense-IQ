<div *ngIf="isOpen" class="fixed inset-0 bg-black/30 flex items-center justify-center z-50">
  <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 relative">

    <!-- Header -->
    <div class="mb-4">
      <h2 class="text-lg font-semibold text-gray-900">Create Wallet</h2>
      <p class="text-sm text-gray-500">Fill in wallet details</p>
    </div>

    <!-- Close button -->
    <button (click)="close()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700">
      <span class="material-icons">close</span>
    </button>

    <form [formGroup]="walletFrom" (ngSubmit)="submitWallet()" class="grid grid-cols-1 gap-4">

      <!-- Wallet Name -->
      <div class="flex flex-col">
        <label class="text-gray-700 font-medium mb-1">Wallet Name <span class="text-red-500">*</span></label>
        <input type="text" formControlName="walletName" placeholder="e.g., Main Bank"
               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition" />
        <small class="text-red-500 mt-1" *ngIf="f['walletName'].touched && f['walletName'].invalid">
          Wallet name is required
        </small>
      </div>

      <!-- Description -->
      <div class="flex flex-col">
        <label class="text-gray-700 font-medium mb-1">Description</label>
        <input type="text" formControlName="walletDesc" placeholder="Optional description"
               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
      </div>

      <!-- Wallet Type -->
      <div class="flex flex-col">
        <label class="text-gray-700 font-medium mb-1">Wallet Type <span class="text-red-500">*</span></label>
        <div class="flex gap-2 flex-wrap">
          <button
            *ngFor="let type of walletDetails"
            type="button"
            class="px-3 py-2 border rounded-md text-sm font-medium transition-all duration-150"
            [ngClass]="{
              'bg-blue-500 text-white border-blue-500 shadow-sm': walletFrom.value.walletType === type.walletTypeid,
              'bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100': walletFrom.value.walletType !== type.walletTypeid
            }"
            (click)="walletFrom.get('walletType')?.setValue(type.walletTypeid)"
          >
            {{ type.typeDesc }}
          </button>
        </div>
        <small class="text-red-500 mt-1" *ngIf="f['walletType'].touched && f['walletType'].invalid">
          Wallet type is required
        </small>
      </div>

      <!-- Currency -->
      <div class="flex flex-col">
        <label class="text-gray-700 font-medium mb-1">Currency <span class="text-red-500">*</span></label>
        <div class="relative">
          <select formControlName="currency"
                  class="w-full px-4 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition bg-white appearance-none text-gray-900">
            <option value="">Select currency</option>
            <option *ngFor="let currency of currencyDetails" [value]="currency.currencyId">
              {{currency.currencyCode}}
            </option>
          </select>
          <span class="material-icons absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">expand_more</span>
        </div>
        <small class="text-red-500 mt-1" *ngIf="f['currency'].touched && f['currency'].invalid">
          Currency is required
        </small>
      </div>

      <!-- Credit Amount -->
      <div class="flex flex-col">
        <label class="text-gray-700 font-medium mb-1">Credit Amount <span class="text-red-500">*</span></label>
        <input type="number" formControlName="initalCreditedAmt" placeholder="0.00"
               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
        <small class="text-red-500 mt-1" *ngIf="f['initalCreditedAmt'].touched && f['initalCreditedAmt'].invalid">
          Credit amount is required and must be positive
        </small>
      </div>

      <!-- Submit -->
      <button type="submit"
              class="w-full py-3 bg-gray-900 text-white font-semibold rounded-xl hover:bg-black transition"
              [disabled]="walletFrom.invalid">
        Create Wallet
      </button>
    </form>
  </div>
</div>
